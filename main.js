/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var p=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var E=(r,e)=>{for(var t in e)p(r,t,{get:e[t],enumerable:!0})},x=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of L(e))!y.call(r,o)&&o!==t&&p(r,o,{get:()=>e[o],enumerable:!(s=g(e,o))||s.enumerable});return r};var W=r=>x(p({},"__esModule",{value:!0}),r);var P={};E(P,{default:()=>l});module.exports=W(P);var m=require("obsidian");var w=require("obsidian");var f=new Set(["\u0432","\u043D\u0430","\u0441","\u043A","\u043E","\u043E\u0431","\u043E\u0442","\u0434\u043E","\u0437\u0430","\u0434\u043B\u044F","\u043F\u043E","\u043F\u0440\u0438","\u0447\u0435\u0440\u0435\u0437","\u043C\u0435\u0436\u0434\u0443","\u043D\u0430\u0434","\u043F\u043E\u0434","\u043F\u0440\u043E","\u0431\u0435\u0437","\u0443","\u0438\u0437","\u043E\u043A\u043E\u043B\u043E","\u0432\u043D\u0435","\u0432\u043D\u0443\u0442\u0440\u0438","\u0432\u043C\u0435\u0441\u0442\u043E","\u0441\u0432\u0435\u0440\u0445","\u0432\u043F\u0435\u0440\u0435\u0434\u0438","\u0432\u0441\u043B\u0435\u0434","\u043F\u043E-\u0437\u0430","\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435","\u043D\u0435","\u043D\u0438","\u0438","\u0430","\u043D\u043E","\u0434\u0430","\u0438\u043B\u0438","\u043B\u0438\u0431\u043E","\u0447\u0442\u043E\u0431\u044B","\u0447\u0442\u043E","\u043A\u0430\u043A","\u043A\u043E\u0433\u0434\u0430","\u0435\u0441\u043B\u0438","\u043F\u043E\u0441\u043A\u043E\u043B\u044C\u043A\u0443","\u0442\u0430\u043A \u043A\u0430\u043A","\u0445\u043E\u0442\u044F","\u0437\u0430\u0442\u043E","\u043B\u0438","\u0432\u0435\u0434\u044C","\u0438\u0431\u043E","\u043F\u0443\u0441\u0442\u044C","\u0434\u0430\u0436\u0435","\u0442\u043E\u043B\u044C\u043A\u043E","\u043E\u0434\u043D\u0430\u043A\u043E","\u0442\u0430\u043A\u0436\u0435","\u043D\u0435\u0441\u043C\u043E\u0442\u0440\u044F","\u043F\u043E\u043A\u0430","\u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E","\u0447\u0435\u043C","\u0447\u0442\u043E\u0431\u044B","\u043B\u0438\u0448\u044C","\u0438\u0431\u043E"]);async function h(r,e){let t=r.vault.getMarkdownFiles(),s=new Map;for(let o of t){let n=(await r.vault.read(o)).replace(/^---[\s\S]*?---\s*/m,"").replace(/```[\s\S]*?```/g,"").replace(/`[^`]*`/g,"").replace(/\[\[.*?]]/g,"").replace(/!\[.*?]\(.*?\)/g,"").replace(/\[.*?]\(.*?\)/g,"").replace(/<[^>]+>/g," ").toLowerCase().normalize("NFKC").match(/\p{L}+(?:-\p{L}+)?/gu)||[];for(let a of n)a.length<2||!e&&f.has(a)||s.set(a,(s.get(a)||0)+1)}return s}var c="wordcloud-view",i=class extends w.ItemView{constructor(t){super(t);this.usePrepositions=!0}getViewType(){return c}getDisplayText(){return"Word Cloud"}async onOpen(){let t=this.containerEl.children[1];t.empty(),t.createEl("h2",{text:"\u0410\u043D\u0430\u043B\u0438\u0437 \u0437\u0430\u043C\u0435\u0442\u043E\u043A..."});let s=t.createEl("label"),o=s.createEl("input",{type:"checkbox"});o.checked=this.usePrepositions,s.appendText(" \u0423\u0447\u0438\u0442\u044B\u0432\u0430\u0442\u044C \u043F\u0440\u0435\u0434\u043B\u043E\u0433\u0438"),o.addEventListener("change",async()=>{this.usePrepositions=o.checked,await this.renderWordList(t)}),await this.renderWordList(t)}async renderWordList(t){let s=t.querySelector("ul");s&&s.remove();let o=await h(this.app,this.usePrepositions),d=Array.from(o.entries()).sort((n,a)=>a[1]-n[1]).slice(0,50),u=t.createEl("ul");for(let[n,a]of d){let k=u.createEl("li",{text:`${n}: ${a}`})}}async onClose(){}};var l=class extends m.Plugin{async onload(){console.log("WordCloud Plugin loaded!"),this.registerView(c,e=>new i(e)),this.addRibbonIcon("cloud","\u0421\u0434\u0435\u043B\u0430\u0442\u044C Word Cloud",async()=>{this.activateView()})}async activateView(){let e=this.app.workspace.getLeaf(!0);await e.setViewState({type:c,active:!0}),this.app.workspace.revealLeaf(e)}onunload(){this.app.workspace.getLeavesOfType(c).forEach(e=>e.detach())}};
